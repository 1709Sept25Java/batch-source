<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>DOM</title>
</head>
<body>
    <div>
   	 <div>
   		 <h3>
   			 Sum: <span id="sum"></span>
   		 </h3>
   		 <h5 id="currentTime"></h5>
   	 </div>
   	 <div>
   		 <h1>
   			 United <span data-customAttr="USA">States</span> of America (<span>USA</span>)
   		 </h1>
   		 <div>
   			 <a>Click Here</a><a>Click Here</a><a>Click Here</a><a>Click Here</a><a>Click
   				 Here</a>
   		 </div>
   		 <a>Click Here</a> <a>Click <span>Here1</span></a> <a>Click Here</a>
   		 <div>
   			 <select name="colors">
   				 <option value="green">Green</option>
   				 <option value="blue">Blue</option>
   				 <option value="red" selected="selected">Red</option>
   				 <option value="purple">Purple</option>
   				 <option value="yellow" selected="selected">Yellow</option>
   			 </select>
   		 </div>
   	 </div>
   	 <p id="helloWorld">Hello, World!</p>
   	 <div>
   		 <table>
   			 <tr>
   				 <th>Name</th>
   				 <th>Department</th>
   			 </tr>
   			 <tr>
   				 <td class="empName">John</td>
   				 <td>Sales</td>
   			 </tr>
   			 <tr>
   				 <td class="empName">Amy</td>
   				 <td>Finance</td>
   			 </tr>
   			 <tr>
   				 <td class="empName">Austin</td>
   				 <td>Sales</td>
   			 </tr>
   			 <tr>
   				 <td class="empName">Katie</td>
   				 <td>Marketing</td>
   			 </tr>
   			 <tr>
   				 <td class="empName" data-customAttr="court">Courtney</td>
   				 <td>Sales</td>
   			 </tr>
   			 <tr>
   				 <td class="empName">Scout</td>
   				 <td>Sales</td>
   			 </tr>
   		 </table>
   	 </div>
   	 <form id="firstForm">
   		 <a>Click <span>Here2</span></a> <input type="text"
   			 data-customAttr="7" /><br /> <input type="text" data-customAttr="24" /><br />
   		 <input type="radio" name="favoriteAnimal" value="dog" />Dog<br /> <input
   			 type="radio" name="favoriteColor" value="blue" />Blue<br /> <input
   			 id="num1" class="nums" type="text" /><br /> <input type="radio"
   			 name="favoriteAnimal" value="cat" />Cat<br /> <input type="radio"
   			 name="favoriteColor" value="red" />Red<br /> <input type="radio"
   			 name="favoriteAnimal" value="horse" />Horse<br /> <input
   			 type="radio" name="favoriteAnimal" value="dolphin" />Dolphin<br /> <a>Click
   			 <span>Here</span>
   		 </a><br /> <input type="radio" name="favoriteAnimal" value="eagle" />Eagle<br />
   		 <input type="radio" name="favoriteColor" value="green" />Green<br />
   		 <input type="radio" name="favoriteColor" value="orange" />Orange<br />
   		 <select name="hobbies">
   			 <option value="photography">Photography</option>
   			 <option value="football" selected="selected">Football</option>
   			 <option value="kayaking" selected="selected">Kayaking</option>
   			 <option value="hiking">Hiking</option>
   			 <option value="programming" selected="selected">Programming</option>
   		 </select> <input id="num2" class="nums" type="text" /> <select name="skills">
   			 <option value="java">Java</option>
   			 <option value="net">.NET</option>
   			 <option value="dom" selected="selected">DOM</option>
   			 <option value="html">HTML</option>
   			 <option value="css">CSS</option>
   			 <option value="javascript" selected="selected">Javascript</option>
   		 </select>
   	 </form>
    </div>
    <a>Click Here</a>
    <a>Click <span data-customAttr="500">Here3</span></a>
    <a>Click Here</a>
	</div>
    <script type="text/javascript">
		window.onload = function() {
			getUSA();
			getPeopleInSales();
			getAnchorChildren();
			getHobbies();
			getCustomAttribute();
		};
		// 1. USA
		//Define function getUSA()
		//Find the html element that contains "USA".
		//Print that element's contents.
		//https://www.w3schools.com/jsref/prop_node_childnodes.asp
		function getUSA() {
			var elements = document.getElementsByTagName('*');
			var i;
			var count; 
			for (i = 0; i < elements.length; i++) {
				if (elements[i].innerHTML.indexOf("USA") >= 0 ) {
					console.log( i + " " +elements[i].innerHTML );
				}
			}
		};
		
		// *2. Sales
		//Define function getPeopleInSales()
		//Print the names of all the people in the sales department.
		function getPeopleInSales() {
			console.log("People in sales");
			var all = document.getElementsByTagName("table");
			for (var i=0; i<all.length; i++) {
				var rows = all[i].getElementsByTagName("td");
				for (var j = 0; j < rows.length; j+=2) {
					if (rows[j+1].innerHTML== "Sales") {
						console.log(rows[j].innerHTML);
					}
				}
			}
		};
		
		// *3. Click Here
		//Define function getAnchorChildren()
		//Find all anchor elements with a <span> child.
		//Print the contents of <span>
		function getAnchorChildren() {
			console.log("Anchor Children");
			var all = document.getElementsByTagName("a");
			for (var i = 0; i<all.length; i++) {
				if (all[i].hasChildNodes()) {
					var spanChild = all[i].getElementsByTagName("span");
					if (spanChild.length > 0) {
						for (var j =0; j < spanChild.length; j++) {
							console.log(spanChild[j]);
						}
					}
				}
			}
		};
		
		// *4. Hobbies
		//Define function 	
		//Find all checked options in the 'skills' select element.
		//Print the value and the contents.
		function getHobbies() {
			console.log("Hobbies");
			var all = document.getElementsByTagName("select");
			for (var i = 0; i<all.length; i++) {
				if (all[i].name === "skills" ) {
					var skills = all[i].options;				
					for (var j=0; j<skills.length; j++) {
						if (skills[j].selected == true) {
							console.log(skills[j].value);
						}
					}
				}
			}
		};
		
		// *5. Custom Attribute
		//Define function getCustomAttribute()
		//Find all elements with "data-customAttr" attribute
		//Print the value of the attribute.
		//Print the element that has the attribute.
		function getCustomAttribute() {
			console.log("data-customAttr");
			var all = document.getElementsByTagName("*");
			for (var i=0; i<all.length; i++) {
				if(all[i].getAttribute("data-customAttr")) {
					console.log(all[i].innerHTML);
				}
			}
			
		};
	
		// *6. Sum Event
		//NOTE: Write unobtrusive Javascript
		//Regarding these elements:
		//<input id="num1" class="nums" type="text"/>
		//<input id="num2" class="nums" type="text"/>
		//<h3>Sum: span id="sum"></span></h3>
		//Define onchange event handler.	
		//Add <input> element values.
		//Put the sum in the <span> element.
		//If values cannot be added, put "Cannot add" in the <span> element
		document.getElementById("num1").addEventListener("change", sumNumbers);
		document.getElementById("num2").addEventListener("change", sumNumbers);
		function sumNumbers(){
			var num1 = document.getElementById("num1");
			var num2 = document.getElementById("num2");
			var sum = document.getElementById("sum");
			var n1 = parseInt(num1.value, 10);
			var n2 = parseInt(num2.value, 10);
			if (num1 !== NaN && num2 != NaN) {
				var add = n1 + n2;
				sum.innerHTML = add;
			}
			if (num1 == NaN || num2 == NaN) {
				sum.innerHTML = "Cannot add";
			}
		};
	
	
		
		// *7. Skills Event
		//NOTE: Write unobtrusive Javascript
		//When user selects a skill, create an alert with a message similar to:
		//"Are you sure CSS is one of your skills?"
		//NOTE: no alert should appear when user deselects a skill.
		var skills = document.getElementById("firstForm").getElementsByTagName("select")[1];
		skills.addEventListener("change", function() {
			for (var i =0; i<skills.options.length; i++) {
				if (skills.options[i].selected == true) {
					alert("are you sure " + skills.options[i].value + " is one of your skills");
				}
			}
		
		}, false);
		
		
		//8. Favorite Color Event
		//NOTE: Write unobtrusive Javascript
		//NOTE: This is regarding the favoriteColor radio buttons.
		//When a user selects a color, create an alert with a message similar to:
		//"So you like green more than blue now?"
		//In this example, green is the new value and blue is the old value.
		//Make the background color (of all favoriteColor radio buttons) 
		//the newly selected favoriteColor
		
		var colors = document.getElementById("firstForm").getElementsByTagName("input");
		//console.log(colors);
		
		for (var fc = 0; fc<colors.length; fc++){
			colors[fc].addEventListener("click", function(){
				if(this.name==="favoriteColor") {
					//console.log("style" + this.style);
					//selected the element but can't change color
					this.style.backgroundColor=this.value;
				}
			})
		}
		
		//9. Show/Hide Event
		//NOTE: Write unobtrusive Javascript
		//When user hovers over an employees name:
		//Hide the name if shown.
		//Show the name if hidden.
		
		//The problem: can't change visibility back to visible because
		//the event listener works on the table instead of each element
		//The solution would be to change this... which I tried but still didn't work
		
		var table = document.getElementsByTagName("table")[0];
		var employees = table.getElementsByClassName("empName");

		for (var em = 0; em < employees.length; em++){
			console.log(em + employees[em].innerHTML);
			employees[em].addEventListener("click", function(event) {
				console.log(this.style.visibility);
				if (  !this.style.visibility || this.style.visibility === "visible"){
					this.style.visibility = "hidden";
				}
				if (this.style.visibility === "hidden") {
					this.style.visibility = "visible";
				}
			});
		}
		
		table.addEventListener("click", function(event){
			var employees = table.getElementsByClassName("empName");
			//console.log(event);
			var emp = getElement(event);
			if (emp) {
				emp = showHide(emp);
			}
		},false);
		
		function showHide(elem) {
			//console.log(elem.style.visibility);
			if ( elem.style.visibility==="hidden"){
				elem.style.visibility = "visible";
			}
			else {
				elem.style.visibility = "hidden";
			}
			return elem;
			
		};
		
		function getElement(evnt){
			//console.log(evnt.target);
			
			for (var i=0; i<employees.length; i++) {
				if (employees[i] == event.target) {
					return employees[i];
				}
			}
		};
		
		
		// *10. Current Time
		//Regarding this element:
		//	<h5 id="currentTime"></h5>
		//Show the current time in this element in this format: 9:05:23 AM
		//The time should be accurate to the second without having to reload the page.
		window.setInterval(getTime, 60);
		function getTime() {
			var time = document.getElementById("currentTime");
			var d = new Date();
			var hour = d.getHours();
			var minute = d.getMinutes();
			var second = d.getSeconds();
			var ampm = "AM";
			if ( hour%12 > 0) {
				ap = "PM";
				hour = hour%12;
			}
			if (hour < 10) {
				hour = "0"+hour;
			}
			if (minute<10) {
				minute = "0"+minute;
			}
			if (second < 10) {
				second = "0"+second;
			}
			var calculatedTime = hour+ ":" + minute + ":"+ second + " " + ampm;
			time.innerHTML = calculatedTime;
		};
		
		
		// *11. Delay
		//Regarding this element:
		//<p id="helloWorld">Hello, World!</p>
		//Three seconds after a user clicks on this element, change the text to a random color.
		document.addEventListener("click",function(event){
			var helloWorld = document.getElementById("helloWorld");//("helloWorld");
			if (event.target == helloWorld) {
				setTimeout(changeColor(helloWorld), 3);
			}
		}); 
		function changeColor(text) {
			text.style.color = "blue";
		}
		
		//12. Walk the DOM
		//Define function walkTheDOM(node, func)
		//This function should traverse every node in the DOM. 
		//Use recursion.
		
		
		
		
		
		
//https://www.w3schools.com/js/js_htmldom_navigation.asp


		
		
    </script>
</body>
</html>


